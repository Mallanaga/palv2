= content_tag 'div', id: 'map', data: {events: @hash} do
  - nil

= content_tag 'div', id: 'sideBar', data: {} do
  #accordion.panel-group
    .panel.panel-default
      .panel-heading
        %h4.panel-title
          = link_to 'Find things to do', '#collapseOne', data: {toggle: 'collapse', parent: '#accordion'}
      #collapseOne.panel-collapse.collapse
        .panel-body
          = render 'layouts/errors'
          = form_tag find_events_path, class: 'input-group', method: 'get', remote: true do 
            = text_field_tag :location, nil, placeholder: 'Location', class: 'form-control'
            = hidden_field_tag :lat
            = hidden_field_tag :lng
            = hidden_field_tag :date
            %span.input-group-btn
              = submit_tag 'Search', class: 'btn btn-default'
          .dateSearch

    .panel.panel-default
      .panel-heading
        %h4.panel-title
          = link_to "Events in <span id='userSearch'>your area</span>".html_safe, '#collapseTwo', data: {parent: '#accordion'}, id: 'show_events_click'
          - if signed_in?
            = link_to '', new_event_path, class: 'glyphicon glyphicon-plus act-button', id: 'new_event', remote: true, title: 'Add Event'
          - else
            = link_to '', '#collapseFour', class: 'glyphicon glyphicon-plus act-button', data: {toggle: 'collapse', parent: '#accordion'}, title: 'Add Event'
          
      #collapseTwo.panel-collapse.collapse
        .panel-body
          %ul
            - if !@events.empty?
              = render(partial: 'sidebar', collection: @events)
            - else
              %p.empty
                Nothing seems to be going on here...
                %br
                Why don't you 
                = link_to 'add something!', new_event_path, id: 'new_event', remote: true
                
    - if signed_in?  
      .panel.panel-default
        .panel-heading
          %h4.panel-title
            = link_to 'Pals', pals_path, remote: true
            = link_to '', users_path, class: 'glyphicon glyphicon-search act-button', title: 'Pals', remote: true
            = link_to '', notifications_path, class: 'glyphicon glyphicon-bell act-button', title: 'Notifications', remote: true
        #collapseThree.panel-collapse.collapse
          .panel-body
            %ul

    .panel.panel-default
      .panel-heading
        %h4.panel-title
          - if signed_in?
            = link_to current_user.first_name, current_user, id: 'show_user_events', remote: true
            = link_to '', signout_path, class: 'glyphicon glyphicon-log-out act-button', title: 'Log Out'
            = link_to '', settings_path, class: 'glyphicon glyphicon-wrench act-button', title: 'Settings', remote: true
            = link_to '', history_path, class: 'glyphicon glyphicon-time act-button', title: 'History', remote: true
          - else
            = link_to 'Log in', '#collapseFour', data: {toggle: 'collapse', parent: '#accordion'}
      #collapseFour.panel-collapse.collapse
        - if signed_in?
          .panel-body
            %ul
        - else
          .panel-body.lo
            = render('sessions/new')

= content_tag 'div', id: 'eventWindow', data: {} do
  %span.glyphicon.glyphicon-remove.close

= content_tag 'div', id: 'createEventWindow', data: {} do
  %span.glyphicon.glyphicon-remove.close